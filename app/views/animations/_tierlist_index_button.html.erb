<div class="dropdown z-10">
  <% if user_signed_in? %>
    <% if animation.tier_lists.find_by(user_id: current_user.id).present? || animation.tier_list_entiers.find_by(user_id: current_user.id).present? %>
      <label tabindex="0" class="btn btn-ghost btn-xs">
        <i class="fa-solid fa-square-plus text-2xl text-accent"></i>
        <p class="text-accent"><%= animation.tier_lists.count + animation.tier_list_entiers.count %></p>
      </label>
    <% else %>
      <label tabindex="0" class="btn btn-ghost btn-xs">
        <i class="fa-solid fa-square-plus text-2xl"></i>
        <p><%= animation.tier_lists.count + animation.tier_list_entiers.count %></p>
      </label>
    <% end %>
  <% else %>
    <label tabindex="0" class="btn btn-ghost btn-xs">
      <i class="fa-solid fa-square-plus text-2xl"></i>
      <p><%= animation.tier_lists.count + animation.tier_list_entiers.count %></p>
    </label>
  <% end %>
  <ul tabindex="0" class="dropdown-content z-[1] menu p-2 shadow bg-neutral rounded-box w-52 m-1 overflow-visible">
    <li>
      <% if user_signed_in? && animation.tier_lists.find_by(user_id: current_user.id).present? %>
        <%= link_to "放送クール", animation_path(animation.id), class: "text-accent", data: { turbo_method: "get", turbo_confirm: "TierListの編集はアニメ詳細画面から行ってください", turbo_frame: "_top" } %>
      <% else %>
        <%= render "tier_lists/new", animation: animation %>
      <% end %>
    </li>
    <li>
      <% if user_signed_in? && animation.tier_list_entiers.find_by(user_id: current_user.id).present? %>
        <%= link_to "全期間", animation_path(animation.id), class: "text-accent", data: { turbo_method: "get", turbo_confirm: "TierListの編集はアニメ詳細画面から行ってください", turbo_frame: "_top" } %>
      <% else %>
        <%= render "tier_list_entiers/new", animation: animation %>
      <% end %>
    </li>
  </ul>
</div>